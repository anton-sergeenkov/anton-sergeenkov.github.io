<h2>Пользовательские директивы</h2>

<ul class="list-links">
	<li><a href="#composition-user-directives-focus">Пример реализации фокуса</a></li>
	<li><a href="#composition-user-directives-hooks">Хуки жизненного цикла директивы</a></li>
</ul>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3 id="composition-user-directives-focus">Пример реализации фокуса</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<ul class="list-point">
	<li>В качестве примера реализуем фокус на элементе <code class="txt">input</code></li>
</ul>

<pre><code class="js">
// Регистрируем глобальную пользовательскую директиву `v-focus`
Vue.directive('focus', {
	// Когда привязанный элемент вставлен в DOM...
	inserted: function (el) {
		// Переключаем фокус на элемент
		el.focus()
	}
})
</code></pre>

<ul class="list-point">
	<li>Чтобы зарегистрировать директиву локально, можно передать опцию <code class="txt">directives</code> при определении компонента</li>
</ul>

<pre><code class="js">
directives: {
	focus: {
		// определение директивы
		inserted: function (el) {
			el.focus()
		}
	}
}
</code></pre>

<ul class="list-point">
	<li>Теперь в шаблонах можно использовать новый атрибут <code class="txt">v-focus</code></li>
</ul>

<pre><code class="html">
&lt;input v-focus&gt;
</code></pre>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3 id="composition-user-directives-hooks">Хуки жизненного цикла директивы</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<ul class="list-point">
	<li><bg-code-list>bind</bg-code-list> вызывается однократно, при первичном связывании директивы с элементом. Здесь можно поместить код инициализации</li>
	<li><bg-code-list>inserted</bg-code-list> вызывается после вставки связанного элемента внутрь элемента родителя (сам родитель может на этот момент и не принадлежать ещё основному дереву элементов)</li>
	<li><bg-code-list>update</bg-code-list> вызывается после обновления VNode компонента-контейнера, но, возможно, до обновления дочерних элементов. Значение директивы к этому моменту может измениться, а может и нет. Сравнивая текущее и прошлое значения, вы можете избежать избыточных операций</li>
	<li><bg-code-list>componentUpdated</bg-code-list> вызывается после обновления как VNode компонента-контейнера, так и VNode его потомков</li>
	<li><bg-code-list>unbind</bg-code-list> вызывается однократно, при отвязывании директивы от элемента</li>
</ul>
