<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" href="../img/favicon.png">
	<link rel="stylesheet" type="text/css" href="../css/main.css">
</head>
<body>
<div id="container">
<div id="menu-left">
    <div id="menu-left-starter">
        <div id="menu-left-show"></div>
        <a href="#menu-top">Starter</a>
    </div>

    <a href="#var">Переменные</a>
    <a href="#if">Конструкция if-else</a>
    <a href="#switch">Конструкция switch-case</a>
    <a href="#cycle">Циклы</a>
    <a href="#array">Массивы</a>
    <a href="#function">Функции</a>
    <a href="#function-php">Функции PHP</a>
    <a href="#server">Суперглобальный массив SERVER</a>
    <a href="#sample1">Пример #1. Файлы и директории</a>
    <a href="#sample2">Пример #2. Изображения</a>
    <a href="#sample3">Пример #3. Отправка email</a>

    <div class="theme">MySQL</div>
    <a href="#mysql">Работа с MySQL</a>
</div>
<div id="content-wrapper">
<div id="menu-top"></div>
<div id="content">





<h1>PHP</h1>

<pre><code class="php">
&lt;?php
    // комментарий
    /*многострочный комментарий*/
    echo 'Hello world!'; // оператор вывода
?&gt;
</code></pre>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="var">Переменные</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre><code class="php">
$car = "BMW";
$model = 525;
echo "Я хочу купить $car"; // выводить переменную можно только в двойных кавычках
echo $car;
</code></pre>

<pre>
<code class="php">
$str1 = 'text1';
$str2 = 'text2';
$str3 = $str1."\n".$str2; // выводить символ переноса строки можно только в двойных кавычках
$str3 = "$str1\n$str2";
</code>
</pre>

<pre>
<code class="php">
$car = "\"BMW\""; // экранирование переменных (можно выводить в кавычках)
$car = "'BMW'";   // использовать '' кавычки
</code>
</pre>

<pre>
<code class="php">
$c = $a.$b; // конкатенация строковых переменных
</code>
</pre>

<pre>
<code class="php">
echo "&lt;p style='color:blue;'&gt;Текст&lt;/p&gt;&lt;br&gt;"
</code>
</pre>

<pre>
<code class="php">
$id++; // увеличение переменной на 1
$id--; // уменьшение переменной на 1
</code>
</pre>

<pre>
<code class="php">
$a = $a + $b;
$a += $b; // короткая запись
</code>
</pre>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="if">Конструкция if-else</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre>
<code class="php">
$weather = 'хорошая';
if($weather == 'хорошая') {
	echo('Идём гулять');
} else {
	echo('Идём в кино');
}
</code>
</pre>

<h3>Двойные условия</h3>
<pre>
<code class="php">
$a = "Дождь";
$b = "Хорошее";
if ($a == "Солнце" || $b == "Хорошее") {
    echo "Идём гулять";
}
else {
    echo "Идём в кино";
}
</code>
</pre>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="switch">Конструкция switch-case</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre>
<code class="php">
switch ($i) {
    case 0: echo "i равно 0"; break;
    case 1: echo "i равно 1"; break;
    default: echo "Значение по умолчанию"; break;
}
</code>
</pre>

<pre>
<code class="php">
$car = "Ferrari";
switch($car) {
	case "Ferrari";
		$year = 2012;
		echo "$year";
		break;
	case "BMW";
		$year = 2012;
		echo "$year";
		break;
}
</code>
</pre>



<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="cycle">Циклы</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Цикл for</h3>
<pre><code class="php">
for ($i = 1; $i <= 10; $i++) {
    echo $i;
}
</code></pre>

<h3>Цикл while-do</h3>
<pre><code class="php">
$page = 1;
while($page <= 20) {
    echo "Читаю $page страницу";
    $page++;
}
</code></pre>
<pre><code class="php">
$page = 1;
do{
    echo "Читаю $page страницу";
    $page++;
} while($page <= 20);
</code></pre>

<h3>Цикл foreach (работа с массивами)</h3>
<pre><code class="php">
$country = array ("Russia", "Latvia", "Germany", "France");
// $item - переменная для получения доступа к элементам массива
foreach($country as $item) {
    echo "Страна: $item";
}
</code></pre>

<h4>Указание ключей самостоятельно</h4>
<pre><code class="php">
// $key - доступ к ключу элемента
// $item - доступ к самому элементу
foreach($country as $key => $item) {
    echo "Страна, где был $key раз - $item";
}
</code></pre>


<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="array">Массивы</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre>
<code class="php">
$forest = array("дуб", "клен", "береза", "елка");      // объявление
$forest[] = "ель";                                     // добавление элемента
$forest[22] = "липа";                                  // добавление элемента с заданным ключем
print_r($forest);                                      // оператор вывода
$country = array ("RU" => "Russia", "LV" => "Latvia"); // объявление с заданным ключем
$a = $country["RU"];                                   // вывод элемента по ключу
count($a);                                             // количество элементов массива $a
</code>
</pre>

<h3>Двумерные массивы</h3>
<pre>
<code class="php">
$world = array("country" => array ("RU" => "Russia", "LV" => "Latvia", "GER" => "Germany"),
               "city" => array ("RU" => "Moscow", "LV" => "Riga", "GER" => "Berlin"));
echo $world["country"]["LV"]; // обращение к элементам двумерного массива
</code>
</pre>

<h3>current(); next(); prev(); end();</h3>
<pre>
<code class="php">
$transport = array('foot', 'bike', 'car', 'plane');
$mode = current($transport); // foot
$mode = next($transport);    // bike
$mode = next($transport);    // car
$mode = prev($transport);    // bike
$mode = end($transport);     // plane
</code>
</pre>

<pre>
<code class="php">
// преобразование строки по разделителю в массив
$arr = explode(",", $id);
foreach ($arr as $value) {
	$a = $value;
}
</code>
</pre>





<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="function">Функции</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre>
<code class="php">
function square($n) {
    $sqr = $n*$n;
    return $sqr;
}
echo square(2);
</code>
</pre>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="function-php">Функции PHP</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre>
<code class="php">
$bool = empty($a);                                   // пустая ли переменная
$bool = isset($a);                                   // существует ли переменная
$bool = is_dir($dir);                                // существует ли директория
mkdir($dir, 0777);                                   // создать директорию
date('Y-m-d');                                       // дата
date('H:i');                                         // время
rand(1,1000);                                        // любое число в диапазоне от 1 до 1000
unset($a);                                           // удаление переменной $a
exit();                                              // окончание работы скрипта
include('func.php');                                 // подключение скриптов
require('func.php');                                 // подключение скриптов
$name = mb_strtolower($name, 'UTF-8');               // перевод в нижний регистр
$html = file_get_contents('../include/header.html'); // получить html файл
</code>
</pre>


<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="server">Суперглобальный массив SERVER</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre>
<code class="php">
$ip = $_SERVER['REMOTE_ADDR'];       // IP пользователя
$brow = $_SERVER['HTTP_USER_AGENT']; // браузер пользователя
</code>
</pre>



<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="sample1">Пример #1. Файлы и директории</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<h3>Создание директории если ее нет</h3>
<pre>
<code class="php">
&lt;?php
    $dir = '../uploads/';
    if( ! is_dir( $dir ) ) mkdir( $dir, 0777 );
?&gt;
</code>
</pre>

<h3>Удаление директории с файлами и поддиректориями</h3>
<pre>
<code class="php">
&lt;?php
    $dir = '../uploads/';
    if( is_dir( $dir ) ) {
        if ($objs = glob($dir."/*")) {
            foreach($objs as $obj) {
                is_dir($obj) ? removeDirectory($obj) : unlink($obj);
            }
        }
        rmdir($dir);
    }
?&gt;
</code>
</pre>

<h3>Сохранение файла .txt на сервере</h3>
<pre>
<code class="php">
&lt;?php
    $file_path = '../uploads/1.txt';
    $file_content = 'Содержимое файла';
    $file = fopen($file_path, 'w');
    fwrite($file, $file_content);
    fclose($file);
?&gt;
</code>
</pre>

<h3>Проверка существования файла</h3>
<pre>
<code class="php">
&lt;?php
    $file = '../uploads/1.jpg';
    if (file_exists($file)) {
        echo "существует";
    } else {
        echo "не существует";
    }
?&gt;
</code>
</pre>

<h3>Удаление файла если он есть</h3>
<pre>
<code class="php">
&lt;?php
    $file = '../uploads/1.jpg';
    if ( file_exists($file) ) {
        unlink($file);
    }
?&gt;
</code>
</pre>

<h3>Перебор строк файла</h3>
<pre>
<code class="php">
&lt;?php
    $lines = file('file.txt');

    foreach ($lines as $line_num => $line) {
        echo $line;
    }
?&gt;
</code>
</pre>



<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="sample2">Пример #2. Изображения</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<h3>Сохранение изображения</h3>

<pre>
<code class="php">
$picture   = $_POST[picture];   // изображение в base64
$file      = $_POST[file];      // путь без расширения
$extension = $_POST[extension]; // расширение
$path      = $file.$extension;

// конвертирование base64 в изображение
$picture = base64_decode($picture);
$picture = imagecreatefromstring($picture);

// проверка расширения
if ($extension == '.png') {
    imagealphablending($picture, false); // выключение альфа сопряжения
    imagesavealpha($picture, true);      // установка альфа флага
    header('Content-Type: image/png');   // header
    imagepng($picture, $path);           // сохранение изображения
} else {
    imagejpeg($picture, $path, 100);
}

// освобождение памяти
imagedestroy($picture);
</code>
</pre>


<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="sample3">Пример #3. Отправка сообщения на почту</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<h3>Отправка сообщения на почту</h3>
<pre>
<code class="php">
&lt;?php
    $to = 'user@example.com, anotheruser@example.com'; // получатель / получатели
    $subject = 'Письмо с сайта';                       // тема письма
    $message = 'Текст письма';                         // сообщение
    <span class="red">$headers  = 'MIME-Version: 1.0' . "\r\n";</span>
    <span class="red">$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";</span>
    $my  = mail($to, $subject, $message<span class="red">, $headers</span>);
    if ($my) {
        echo 'Письмо успешно отправлено!';
    } else {
        echo 'Письмо не отправлено!';
    }
?&gt;
</code>
</pre>





<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h2 id="mysql">Работа с MySQL</h2>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<h3>Подключение к БД (connect.php)</h3>
<pre>
<code class="php">
// Для хостинга
$host = 'localhost';
$user = 'ce00000_test';
$pass = 'dLz2noIP4';
$db   = 'ce00000_test';

// Для локального хостинга
$host = 'localhost';
$user = 'root';
$pass = '';
$db = 'sample';

$link = mysqli_connect($host, $user, $pass, $db);
mysqli_set_charset($link, 'utf8');
if(!$link) {
    exit(mysqli_error($link));
}
</code>
</pre>


<h3>Выборка одной записи (select)</h3>
<pre>
<code class="php">
include('connect.php');

$sql = "SELECT * FROM articles WHERE ID=2";
$query = mysqli_query($link, $sql);
$row = mysqli_fetch_array($query);

echo $row['NAME'];
echo $row['DESCRIPTION'];
</code>
</pre>


<h3>Выборка всех записей в цикле (select)</h3>
<pre>
<code class="php">
include('connect.php');

$sql = "SELECT * FROM articles ORDER BY ID";
$query = mysqli_query($link, $sql);
$row = mysqli_fetch_array($query);
do {
    echo $row['NAME'];
    echo $row['DESCRIPTION'];
} while ($row = mysqli_fetch_array($query))
</code>
</pre>


<h3>Добавление информации в БД (insert)</h3>
<pre>
<code class="php">
include('connect.php');

$name         = $_POST['NAME'];
$description  = $_POST['DESCRIPTION'];

$sql = "INSERT INTO articles(NAME, DESCRIPTION) VALUES ('$name', '$description')";
$query = mysqli_query($link, $sql);
</code>
</pre>


<h3>Обновление информации (update)</h3>
<pre>
<code class="php">
include('connect.php');

$sql = "UPDATE articles SET NAME='New name', DESCRIPTION='New description' WHERE ID=2";
$query = mysqli_query($link, $sql);
</code>
</pre>


<h3>Удаление информации (delete)</h3>
<pre>
<code class="php">
include('connect.php');

$sql = "DELETE FROM articles WHERE ID=2";
$query = mysqli_query($link, $sql);
</code>
</pre>


<h3>Выставление кодировки</h3>
<pre>
<code class="php">
// принудительное выставление кодировки при работе с БД
// запросы после подключения к бд
// только должно идти перед всеми остальными запросами
set character_set_client='utf8';
set character_set_results='utf8';
set collation_connection='utf8_general_ci';
</code>
</pre>





</div>
</div>
</div>
	<div id="preloader"></div>
    <script src="../libraries/jquery.js"></script>
	<script src="../libraries/highlight/highlight.pack.js"></script>
	<script src="../js/main.js"></script>
	<script src="../module/preloader/preloader.js"></script>
</body>
</html>
